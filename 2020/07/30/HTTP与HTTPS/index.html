<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>HTTP与HTTPS | Ran</title><meta name="description" content="HTTP协议用于用于客户端和服务器通信，请求访问资源的一端称为客户端，而提供资源响应的一端称为服务端，HTTP协议使用URI定位互联网上的资源，当客户端请求访问资源而发送请求时，URL需要将作为请求报文中的请求URL包含在内 URL统一资源定位符http:&#x2F;&#x2F;user:pass@www.example.jp:80&#x2F;dir&#x2F;index.htm?uid&#x3D;1#ch1http: 协议名user:pass:"><meta property="og:type" content="article"><meta property="og:title" content="HTTP与HTTPS"><meta property="og:url" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/"><meta property="og:site_name" content="Ran"><meta property="og:description" content="HTTP协议用于用于客户端和服务器通信，请求访问资源的一端称为客户端，而提供资源响应的一端称为服务端，HTTP协议使用URI定位互联网上的资源，当客户端请求访问资源而发送请求时，URL需要将作为请求报文中的请求URL包含在内 URL统一资源定位符http:&#x2F;&#x2F;user:pass@www.example.jp:80&#x2F;dir&#x2F;index.htm?uid&#x3D;1#ch1http: 协议名user:pass:"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img1.png"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img2.png"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img3.png"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img4.png"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img5.png"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img6.png"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img7.png"><meta property="og:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img8.png"><meta property="article:published_time" content="2020-07-29T16:00:00.000Z"><meta property="article:modified_time" content="2020-07-29T16:00:00.000Z"><meta property="article:author" content="Ran"><meta property="article:tag" content="HTTP"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/img1.png"><link rel="canonical" href="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/index.html"><link rel="alternate" href="/atom.xml" title="Ran" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/Ranjiahao" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">Ran</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">I am a student</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Xi&#39;an, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">分类</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">标签</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">项目</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/Ranjiahao" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C-C/">C/C++</a><span class="category-list-count">44</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">25</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/AVL%E6%A0%91/" style="font-size:13px">AVL树</a> <a href="/tags/C-11%E5%88%97%E8%A1%A8%E5%88%9D%E5%A7%8B%E5%8C%96/" style="font-size:13px">C++11列表初始化</a> <a href="/tags/HTTP/" style="font-size:13px">HTTP</a> <a href="/tags/Socket/" style="font-size:13px">Socket</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/UDP/" style="font-size:13px">UDP</a> <a href="/tags/auto/" style="font-size:13px">auto</a> <a href="/tags/date%E7%B1%BB/" style="font-size:13px">date类</a> <a href="/tags/decltype/" style="font-size:13px">decltype</a> <a href="/tags/fork/" style="font-size:13px">fork</a> <a href="/tags/ipc/" style="font-size:13.75px">ipc</a> <a href="/tags/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size:13px">lambda表达式</a> <a href="/tags/map-set/" style="font-size:13px">map/set</a> <a href="/tags/mysql/" style="font-size:13.25px">mysql</a> <a href="/tags/stl/" style="font-size:13.75px">stl</a> <a href="/tags/strtok/" style="font-size:13px">strtok</a> <a href="/tags/unordered-map-set/" style="font-size:13px">unordered_map/set</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/" style="font-size:13px">二叉搜索树</a> <a href="/tags/%E4%BD%8D%E5%9B%BE/" style="font-size:13px">位图</a> <a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:13px">信号</a> <a href="/tags/%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B/" style="font-size:13px">僵尸进程</a> <a href="/tags/%E5%86%85%E6%A0%B8%E6%80%81%E4%B8%8E%E7%94%A8%E6%88%B7%E6%80%81/" style="font-size:13px">内核态与用户态</a> <a href="/tags/%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/" style="font-size:13px">内联函数</a> <a href="/tags/%E5%86%85%E9%83%A8%E7%B1%BB/" style="font-size:13px">内部类</a> <a href="/tags/%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/" style="font-size:13px">函数重载</a> <a href="/tags/%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98/" style="font-size:13px">动态内存</a> <a href="/tags/%E5%8A%A8%E6%80%81%E5%BA%93%E9%9D%99%E6%80%81%E5%BA%93/" style="font-size:13px">动态库静态库</a> <a href="/tags/%E5%8F%8B%E5%85%83/" style="font-size:13px">友元</a> <a href="/tags/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8/" style="font-size:13px">可变参数列表</a> <a href="/tags/%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/" style="font-size:13px">右值引用</a> <a href="/tags/%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/" style="font-size:13px">命名空间</a> <a href="/tags/%E5%93%88%E5%B8%8C/" style="font-size:13px">哈希</a> <a href="/tags/%E5%A4%9A%E6%80%81/" style="font-size:13px">多态</a> <a href="/tags/%E5%A4%9A%E8%B7%AF%E8%BD%AC%E6%8E%A5/" style="font-size:13px">多路转接</a> <a href="/tags/%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/" style="font-size:13px">孤儿进程</a> <a href="/tags/%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91/" style="font-size:13px">完美转发</a> <a href="/tags/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/" style="font-size:13px">布隆过滤器</a> <a href="/tags/%E6%8C%87%E9%92%88/" style="font-size:13.25px">指针</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size:14px">排序</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size:13px">数组</a> <a href="/tags/%E6%96%87%E4%BB%B6IO/" style="font-size:13.25px">文件IO</a> <a href="/tags/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" style="font-size:13px">文件系统</a> <a href="/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" style="font-size:13px">智能指针</a> <a href="/tags/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/" style="font-size:13px">构造函数</a> <a href="/tags/%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0/" style="font-size:13px">析构函数</a> <a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:13px">模板</a> <a href="/tags/%E6%B5%AE%E7%82%B9%E6%95%B0/" style="font-size:13px">浮点数</a> <a href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size:13px">环境变量</a> <a href="/tags/%E7%B1%BB%E5%9E%8B%E8%90%83%E5%8F%96/" style="font-size:13px">类型萃取</a> <a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size:13.25px">类型转换</a> <a href="/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/" style="font-size:13px">红黑树</a> <a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:13.5px">线程</a> <a href="/tags/%E7%BB%A7%E6%89%BF/" style="font-size:13px">继承</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" style="font-size:13px">网络基础</a> <a href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B/" style="font-size:13px">自定义类型</a> <a href="/tags/%E8%8C%83%E5%9B%B4for/" style="font-size:13px">范围for</a> <a href="/tags/%E8%99%9A%E5%87%BD%E6%95%B0/" style="font-size:13px">虚函数</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:13px">设计模式</a> <a href="/tags/%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5/" style="font-size:13px">软硬链接</a> <a href="/tags/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/" style="font-size:13px">运算符重载</a> <a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:13.5px">进程</a> <a href="/tags/%E9%93%BE%E6%8E%A5%E6%80%A7/" style="font-size:13px">链接性</a> <a href="/tags/%E9%94%81/" style="font-size:13px">锁</a> <a href="/tags/%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/" style="font-size:13px">预处理器</a> <a href="/tags/%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0/" style="font-size:13px">默认参数</a></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-HTTP与HTTPS" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">HTTP与HTTPS</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2020/07/30/HTTP%E4%B8%8EHTTPS/" class="article-date"><time datetime="2020-07-29T16:00:00.000Z" itemprop="datePublished">2020-07-30</time></a></span> <span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/Linux/">Linux</a></span> <span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link" href="/tags/HTTP/" rel="tag">HTTP</a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2020/07/30/HTTP%E4%B8%8EHTTPS/#comments" class="article-comment-link">评论</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p>HTTP协议用于用于客户端和服务器通信，请求访问资源的一端称为客户端，而提供资源响应的一端称为服务端，HTTP协议使用URI定位互联网上的资源，当客户端请求访问资源而发送请求时，URL需要将作为请求报文中的请求URL包含在内</p><h1 id="url"><a class="markdownIt-Anchor" href="#url"></a> URL</h1><p>统一资源定位符<br><code>http://user:pass@www.example.jp:80/dir/index.htm?uid=1#ch1</code><br>http: 协议名<br>user:pass: 登录信息<br><a href="http://www.example.jp" target="_blank" rel="noopener">www.example.jp</a>: 服务器地址<br>80: 端口号<br>dir/index.htm: 带层次的路径名<br>uid=1: 查询字符，一个个key=val形式的键值对，并且键值对之间用&amp;符号进行间隔<br>ch1: 片段标识符</p><p>eg:<br><code>https://www.bing.com/search?q=C%2B%2B&amp;qs=n&amp;form=QBLH&amp;sp=-1&amp;pq=&amp;sc=0-0&amp;sk=&amp;cvid=553C64EAE262401D94DD4794F3A33CFF</code><br>我们可以看到，上面的url格式中，有一些字符，比如/?:等这些字符在url中有着特殊的含义，我们不可以随便的使用，某个参数中需要带有这些特殊字符，就必须先对特殊字符进行转义，转码的字符转为16进制，编码成%XY格式，&quot;+&quot; 被转义成了 “%2B”</p><h1 id="http请求格式"><a class="markdownIt-Anchor" href="#http请求格式"></a> HTTP请求格式</h1><p><img src="img1.png" alt="img1"></p><p>首行: [方法] + [url] + [版本]<br>Header: 请求的属性，冒号分割的键值对，每组属性之间使用\r\n分隔，遇到空行(连续两次\r\n)表示Header部分<br>结束<br>常见属性：<br>Host: 表示访问主机名，也就是ip地址的别，即域名<br>Connection: 长连接开关<br>Content-Length: Body长度<br>Cache-Control: 缓存时间<br>Upgrade-Insecure-Requests: 请求升级<br>Content-Type: 正文数据类型<br>User-Agent: 操作系统和浏览器信息<br>Accept: 用户代理可处理的类型<br>Referer: 跳转信息<br>Accept-Encoding: 内容编码，内容编码后的实体由客户端接收并负责解码<br>Accept-Language: 客户端语言<br>Cookie: 用来保存一个从服务器返回回来的字符串，并且保存到本地，下一次访问同一个网站，会将这个信息带回去<br>Body: 空行后面的内容都是Body，允许为空字符串，如果Body存在，则在Header中会有一个Content-Length属性来标识Body的长度</p><h2 id="请求方法"><a class="markdownIt-Anchor" href="#请求方法"></a> 请求方法</h2><p>GET: 获取资源，请求访问已被URI识别的资源，经服务器端解析后返回<br>POST: 传输实体主体<br>PUT: 传输文件，自身不带验证机制，任何人都可以上传，存在安全问题，需要配合Web应用程序的验证机制，或架构设计采用REST标准的同类Web网站<br>HEAD: 获得报文首部<br>DELETE: 删除文件<br>OPTIONS: 询问支持的方法<br>TRACE: 通过属性Max-Forwards追踪路径<br>CONNECT: 要求用隧道协议连接代理</p><h1 id="http响应格式"><a class="markdownIt-Anchor" href="#http响应格式"></a> HTTP响应格式</h1><p><img src="img2.png" alt="img2"></p><p>首行: [版本号] + [状态码] + [状态码解释]<br>Header: 响应属性<br>常见属性：<br>Sever: HTTP服务器安装信息<br>Content-Type: text/html表示body的格式是一个xml的文本格式，charset说明字符集为utf-8<br>Content-Length: Body部分的字节数<br>Location: 令客户端重定向到指定的URL<br>Transfer-Encoding: 传输内容编码，如分块传输每一块都会用十六进制来标记块的大小， 而实体主体的最后一块会使用0\r\n<br>Set-Cookie: 和请求中的Cookie对应，服务器利用Set-Cookie向客户端返回用来表示身份信息的的字符串，下次访问时就会重新带入，避免再次登录<br>Body: 如果服务器返回了一个html页面，那么html页面内容就是在body中</p><h2 id="状态码"><a class="markdownIt-Anchor" href="#状态码"></a> 状态码</h2><p><img src="img3.png" alt="img3"></p><p>200 OK 表示从客户端发来的请求在服务器端被正常处理<br>204 No Content 服务器接收的请求已成功处理， 但在返回的响应报文中不含实体的主体部分<br>206 Partial Content 客户端进行了范围请求，服务器成功执行了这部分的GET请求。响应报文中包含由Content-Range指定范围的实体内容<br>301 Moved Permanently 永久性重定向表示请求的资源已被分配了新的URI，以后应使用资源现在所指的URI。也就是说，如果已经把资源对应的URI保存为书签了，这时应该按Location首部字段提示的URI重新保存<br>302 Found 临时性重定向<br>304 Not Modified 服务器端允许请求访问资源，但未满足条件的情况<br>400 Bad Request 请求报文中存在语法错误<br>401 Unauthorized 表示发送的请求需要有通过HTTP认证的认证信息<br>403 Forbidden 对请求资源的访问被服务器拒绝<br>404 Not Found 无法找到请求的资源<br>500 Internal Server Error 服务器端在执行请求时发生了错误<br>503 Service Unavailable 服务器暂时处于超负载或正在进行停机维护<br>504 Gateway Timeout 网关超时</p><h1 id="cookie"><a class="markdownIt-Anchor" href="#cookie"></a> Cookie</h1><p>HTTP是一种不保存状态，即无状态的协议。HTTP协议自身不对请求和响应之间的通信状态进行保存，这是为了更快地处理大量事务，确保协议的可伸缩性，可减少服务器的CPU及内存资源的消耗而特意把HTTP协议设计成如此简单的，但是针对一些场景，需要继续保持登录状态，于是引入了Cookie技术，有了Cookie再用HTTP协议通信，就可以管理状态了<br>如果，客户端发送的报文中无Cookie，则服务器生成一个Cookie，通过Set-Cookie的首部字段信息，通知客户端保存Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入Cookie值后发送出去，服务器端发现客户端发送过来的Cookie后，会去检查究竟是从哪一个客户端发来的连接请求，然后对比服务器上的记录，最后得到之前的状态信息</p><h1 id="持久连接"><a class="markdownIt-Anchor" href="#持久连接"></a> 持久连接</h1><p>HTTP协议的初始版本中，由于当年都是些容量很小的文本传输，每进行一次HTTP请求响应就要断开一次TCP连接，随着HTTP的普及，文档中包含大量图片的情况多了起来。比如，使用浏览器浏览一个包含多张图片的HTML页面时，发送请求访问HTML页面资源的同时，也会请求该 HTML页面里包含的其他资源，每次的请求都会造成无谓的TCP连接建立和断开，增加通信量的开销所以1.0版本时候，部分厂商提出了持久连接，只要任意一端没有明确提出断开连接，则保持TCP连接状态。<br>HTTP/1.1 中，所有的连接默认都是持久连接，持久连接使得多数请求以管线化方式发送，从前发送请求后需等待并收到响应，才能发送下一个请求。管线化技术出现后，不用等待响应亦可直接发送下一个请求，做到同时并行发送多个请求，不需要一个接一个地等待响应</p><h1 id="http存在的问题和解决方法"><a class="markdownIt-Anchor" href="#http存在的问题和解决方法"></a> HTTP存在的问题和解决方法</h1><p>由于通信使用明文，所以内容可能会被窃听，而且不验证通信方的身份， 有可能遭遇伪装，还无法证明报文的完整性， 有可能已遭篡改。</p><p>解决方法：</p><ol><li>通信加密<br>HTTP协议中没有加密机制，但可以通过和SSL或TLS的组合使用，加密HTTP的通信内容，用SSL建立安全通信线路之后， 就可以在这条线路上进行HTTP通信了</li><li>内容加密<br>客户端需要对HTTP报文进行加密处理后再发送请求<img src="img4.png" alt="img4"></li></ol><p>但是单纯的加密的不够的，还需要身份验证，如果不论谁发送过来的请求都会返回响应，会存在很多隐患，有可能响应给伪装的Web服务器或者客户端，无法确定正在通信的对方是否具备访问权限，无意义的请求也会照单全收（无法阻止DOS攻击）<br>所以SSL还使用了一种被称为证书的手段，可以确认对方，证书由值得信任的第三方机构颁发，用以证明服务器和客户端是实际存在的。另外，伪造证书从技术角度来说是异常困难的一件事。所以只要能够确认通信方（服务器或客户端）持有的证书，即可判断通信方的真实意图，另外，客户端持有证书即可完成个人身份的确认，也可用于对Web网站的认证环节</p><p>但这还存在一些问题，HTTP协议无法证明通信的报文完整性，因此，在请求或响应送出之后直到对方接收之前的这段时间内，没有任何办法确认， 发出的请求/响应和接收到的请求/响应是前后相同的<img src="img5.png" alt="img5"><br>所以我们可以用MD5和SHA-1等散列值校验的方法，以及用来确认文件的数字签名方法，但这些方法也依然无法百分百保证确认结果正确，PGP和MD5本身被改写的话，用户是没有办法意识到的，因此仅靠HTTP确保完整性是非常困难的</p><h1 id="https"><a class="markdownIt-Anchor" href="#https"></a> HTTPS</h1><p><strong>HTTP+ 加密 + 认证 + 完整性保护=HTTPS</strong></p><p>HTTPS是身披SSL外壳的HTTP，HTTP先和SSL通信，再由SSL和TCP通信<br><img src="img6.png" alt="img6"></p><p><strong>加密</strong><br>对称密钥加密：加密和解密同用一个密钥，这种方式必须将密钥也发给对方，但是密钥若能安全发送，那数据也能到达</p><p>对非对称密钥加密：使用公开密钥加密方式，发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后， 再使用自己的私有密钥进行解密。利用这种方式，不需要发送用来解密的私有密钥， 也不必担心密钥被攻击者窃听而盗走，但是处理速度慢</p><p>混合加密机制：HTTPS采用对称加密和非对称加密并用的混合加密机制，在交换密钥环节使用公开密钥加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式</p><p><strong>认证</strong><br>为了解决身份验证问题，HTTPS中使用数字证书认证机构和其相关机关颁发的公开密钥证书。<br>服务器的运营人员向证书认证机构提出公开密钥的申请。证书认证机构在判明提出申请者的身份之后，会对已申请的公开密钥做数字签名，然后分配这个已签名的公开密钥，并将该公开密钥放入证书后绑定在一起，服务器会将这份由认证机构颁发的证书发送给客户端，以进行公开密钥加密方式通信，当客户端接收到服务器发送的公钥证书的时候，就会向证书认证机构来验证数字签名是否正确，来判断该公钥是否遭到替换，确保了公钥的真实性</p><p><strong>HTTPS通信步骤</strong></p><p><img src="img7.png" alt="img7"></p><ol><li>客户端通过发送Client Hello报文开始SSL通信。 报文中包含客户端支持的SSL的指定版本、 加密组件列表（所使用的加密算法及密钥长度等）</li><li>服务器可进行SSL通信时，会以Server Hello报文作为应答。和客户端一样，在报文中包含SSL版本以及加密组件。服务器的加密组件内容是从接收到的客户端加密组件内筛选出来的</li><li>服务器发送Certificate报文。报文中包含公开密钥证书</li><li>最后服务器发送Server Hello Done报文通知客户端，最初阶段的SSL握手协商部分结束</li><li>SSL第一次握手结束之后，客户端以Client Key Exchange报文作为回应。报文中包含通信加密中使用的一种被称为Pre-master secret的随机密码串。该报文已用步骤3中的公开密钥进行加密</li><li>接着客户端继续发送Change Cipher Spec报文。该报文会提示服务器，在此报文之后的通信会采用Pre-master secret密钥加密</li><li>客户端发送 Finished 报文。该报文包含连接至今全部报文的整体校验值。这次握手协商是否能够成功，要以服务器是否能够正确解密该报文作为判定标准</li><li>服务器同样发送Change Cipher Spec报文</li><li>服务器同样发送Finished报文</li><li>服务器和客户端的Finished报文交换完毕之后，SSL连接就算建立完成。当然，通信会受到SSL的保护。从此处开始进行应用层协议的通信，即发送HTTP请求</li><li>应用层协议通信，即发送HTTP响应</li><li>最后由客户端断开连接。断开连接时，发送close_notify报文。上图做了一些省略，这步之后再发送TCP FIN报文来关闭与TCP的通信</li></ol><p>在上面的流程中，应用层发送数据的时候会附加MAC报文摘要，MAC能够查知报文是否遭受到篡改，从而让保护报文的完整性</p><p><img src="img8.png" alt="img8"></p><p>HTTPS也存在一些问题，那就是当使用SSL时，通信速度慢，大量消耗CPU及内存等资源，导致处理速度变慢（解决方法SSL专用服务器）</p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/" title="HTTP与HTTPS" target="_blank" rel="external">https://ranjiahao.github.io/2020/07/30/HTTP%E4%B8%8EHTTPS/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/Ranjiahao" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/Ranjiahao" target="_blank"><span class="text-dark">Ran</span><small class="ml-1x">I am a student</small></a></h3><div>stay healthy and happy</div></div></figure></div></div></div></article><section id="comments"></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2020/08/08/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" title="单例模式"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/2020/07/26/%E4%BD%8D%E5%9B%BE%E4%B8%8E%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/" title="位图与布隆过滤器"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/Ranjiahao" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.js"></script><script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"",clientSecret:"",repo:"Ranjiahao.github.io",owner:"Ranjiahao",admin:["Ranjiahao"],id:md5(location.pathname),distractionFreeMode:!0});gitalk.render("comments")</script></body></html>